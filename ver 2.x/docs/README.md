Вентилятор на ИК пульте ver. 2.x

  Напольный вентилятор с управлением через ИК пульт (ТОЛЬКО по протоколу NEC).

  На реальной практике и долгому использованию сделал версию 2.x, переработав код и физическую обвязку МК.
  Это позволило немного упростить схему, сделать работу вентилятора на много стабильнее,
  так же убрал лишний код с таймерами и немного оптимизировал его, что позволило использовать МК с 4Кб Flash.
  P.S. ATmega48 и ATmega8 взаимозаменяемы без изменения схемы.
  

  ОПИСАНИЕ:
  Вентилятор имеет 4 режима скорости: первые три скорости штатные, четвёртый с пониженными оборотами (через гасящий конденсатор).
  Возможность управлять поворотами вентилятора через Servo мотор:
    - Ручные повороты влево-вправо с помощью нажатия и удержания соответсвующей кнопки с пульта;
    - Автоповороты влево-вправо кратковременным нажатием кнопки с пульта и отключением другой.

  Любая из четырёх скоростей включается с таймером, по истечению которого вентилятор выключится и выключит автоповороты (если они были включены).
  Время таймеров зашито в прошивку и легко меняется на влкдке "a0_Settings", так же на той же вкладке меняются все остальные настройки.

  Всего имеется 2 таймера для всех 4-х режимов (как показала долгая практика - этого хватает вполне).
  При включении питания положение Servo сохраняется в том же состоянии, в котором оно было остановлено перед отключеием.
  Положение серво сохраняется в EEPROM при:
    - Нажатии кнопки Off (Выключить ВСЁ);
    - Нажатии кнопки ↓ Авто (откл. автоповоротов);
    - Отключение любого из двух таймеров;
    - Нажатии и удержании кнопок < Влево или Вправо > (ручные повороты Servo).

  P.S. При ручных поворотах, что бы не "насиловать" EEPROM на запись при долгом удержании кнопок "< Влево или Вправо >" 
  используется отложеное сохранение положения Servo по таймеру и флагу.

  Для замены кодов кнопок на свои использовать скетч "IR_Decoder" + любую Arduino с TTL конвертером (что бы выводить 8-ми битные коды кнопок в Serial).

  Перед компиляцией выбрать нужный МК: ATmega48 или ATmega8.
  И на вкладке "a0_Settings" так же изменить параметры WatchDog под выбраный МК или просто выключить его,
  так же изменить значение "EEPROM_MARKER" на той же вкладке "a0_Settings".
  При необходимости изменить другие настройки и загрузить код.


  Параметры платы в Arduino IDE (MiniCore v. 2.2.1):
  1) Плата: MiniCore -> "ATmega48" или "ATmega8"
  2) BOD: BOD 4.3V (для ATmega8 4.0V)
  3) Bootloader: No bootloader
  4) Clock: External 16MHz
  5) EEPROM: EEPROM retained
  6) Compiler LTO: LTP enabled
  7) Variant: 48/48A (для ATmega48)
  ----------------------------
  8) Программатор: USBasp
  После выставления параметров нажать: Записать Загрузчик.



  ИЗМЕНЕНИЯ В ВЕРСИЯХ КОДА:

  Версия: 2.0 [начальный релиз] (16.03.2023).

  Версия: 2.1 (30.04.2023):
  - Исправил ошибку в названии кнопки OFF (была написана как OK), что бы не вводила в заблуждение;
  - Добавил возможность Вкл./Выкл. LED индикаторы режимов с пульта одной кнопкой (что бы ночью не мешали);
  - Заменил в некоторых местах "digitalWrite()" на управление конкретными пинами LED через решистры портов для уменьшения размера кода (что бы уместить код в ATmega48).
  


  Автор: Otto
  Версия изменения: 2.1
  Создан: 30.04.2023